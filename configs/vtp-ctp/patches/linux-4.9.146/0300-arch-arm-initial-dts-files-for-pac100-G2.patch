From 4e0c453654e572a534479b470386817b9bcd4b87 Mon Sep 17 00:00:00 2001
From: Oliver Rohe <Oliver.Rohe@wago.com>
Date: Thu, 28 Mar 2019 10:24:31 +0100
Subject: [PATCH] arch: arm: initial dts files for pac100 G2

---
 arch/arm/boot/dts/Makefile                 |   1 +
 arch/arm/boot/dts/am335x-pac-768_3301.dts  | 108 +++++++++++++++++++++++++++++
 arch/arm/boot/dts/am335x-pfc-750_821x.dtsi |   2 +-
 arch/arm/boot/dts/devconf.dtsi             |   6 ++
 4 files changed, 116 insertions(+), 1 deletion(-)
 create mode 100644 arch/arm/boot/dts/am335x-pac-768_3301.dts

diff --git a/arch/arm/boot/dts/Makefile b/arch/arm/boot/dts/Makefile
index a5abce7..7b8b115 100644
--- a/arch/arm/boot/dts/Makefile
+++ b/arch/arm/boot/dts/Makefile
@@ -570,6 +570,7 @@ dtb-$(CONFIG_SOC_AM33XX) += \
 	am335x-wega-rdk.dtb \
 	am335x-pfc-750_8102.dtb \
 	am335x-pfc-750_8100_8101.dtb \
+	am335x-pac-768_3301.dtb \
 	am335x-pfc-750_8208.dtb \
 	am335x-pfc-750_8211.dtb \
 	am335x-pfc-750_8212.dtb \
diff --git a/arch/arm/boot/dts/am335x-pac-768_3301.dts b/arch/arm/boot/dts/am335x-pac-768_3301.dts
new file mode 100644
index 0000000..d300a08
--- /dev/null
+++ b/arch/arm/boot/dts/am335x-pac-768_3301.dts
@@ -0,0 +1,108 @@
+/*
+ * Copyright (C) 2019 WAGO Kontakttechnik GmbH & Co. KG - http://global.wago.com/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+/dts-v1/;
+
+#include "am335x-pfc-750_821x.dtsi"
+#include "am3xxx-mv88e6321.dtsi"
+#include "devconf.dtsi"
+
+/ {
+	model = "WAGO PAC100 768-3301";
+	compatible = "wago,am335x-pac-768_330x-1005", "wago,am335x-pfc", "ti,am33xx";
+};
+
+&wsysinit {
+	tty,rs232-485 = "nop";
+	tty,service   = "ttyO0";
+	board,variant = "pac100";
+};
+
+&uio_nvram {
+	status = "disabled";
+};
+
+&usb {
+	status = "okay";
+};
+
+&usb_ctrl_mod {
+	status = "okay";
+};
+
+&usb0_phy {
+	status = "okay";
+};
+
+&usb0 {
+	status = "okay";
+	dr_mode = "peripheral";
+};
+
+&cppi41dma {
+	status = "okay";
+};
+
+&uart5 {
+	status = "disabled";
+};
+
+&kbus0 {
+	status = "disabled";
+};
+
+&led_bar0 {
+	status = "disabled";
+};
+
+&sys_r {
+	label = "ds-red";
+};
+
+&sys_g {
+	label = "ds-green";
+};
+
+&run_r {
+	label = "ec-red";
+};
+
+&run_g {
+	label = "ec-blue";
+};
+
+&io_r {
+	label = "ms-red";
+};
+
+&io_g {
+	label = "ms-green";
+};
+
+&ms_r {
+	label = "ns-red";
+};
+
+&ms_g {
+	label = "ns-green";
+};
+
+&ns_r {
+	label = "run-red";
+};
+
+&ns_g {
+	label = "run-green";
+};
+
+&u7_r {
+	label = "app-red";
+};
+
+&u7_g {
+	label = "app-green";
+};
diff --git a/arch/arm/boot/dts/am335x-pfc-750_821x.dtsi b/arch/arm/boot/dts/am335x-pfc-750_821x.dtsi
index 8f599db..5eae66a 100644
--- a/arch/arm/boot/dts/am335x-pfc-750_821x.dtsi
+++ b/arch/arm/boot/dts/am335x-pfc-750_821x.dtsi
@@ -51,7 +51,7 @@
                 vin-supply = <&dcdc4_reg>;
 	};
 
-	UIO_NVRAM@0x1000000 {
+	uio_nvram: UIO_NVRAM@0x1000000 {
 		compatible = "uio_pdrv_genirq";
 		reg = <0x01000000 0x00020000>;  /* 128k 16bit NVRAM */
 	};
diff --git a/arch/arm/boot/dts/devconf.dtsi b/arch/arm/boot/dts/devconf.dtsi
index baa36c8..8ecd69a 100644
--- a/arch/arm/boot/dts/devconf.dtsi
+++ b/arch/arm/boot/dts/devconf.dtsi
@@ -108,4 +108,10 @@
  * |            001c |           750-8217 |
  * |-----------------|--------------------|
  *
+ * PAC 100 v2 (AM335X)
+ *
+ * | Device ID (hex) | Device description |
+ * |-----------------|--------------------|
+ * |            01a8 |           768-3301 |
+ * |-----------------|--------------------|
  */
-- 
2.7.4

